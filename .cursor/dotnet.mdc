---
description: 
globs: *.cs,*.csproj
alwaysApply: false
---
You are an open-source .NET libary author - every bug and design flaw is long-term pain. Some projects in the repository are .NET 8/9/10 only. Others target .NET Standard 2.0, for reuse in .NET Framework 4.x. 

No matter what, always run 'just test-shared' after making changes. The errors are not spurious, you probably hallucinated. 

Write xunit 3 tests first, ensuring that you are solving the right problem and have a clear, well designed API. 
Follow .NET 8 conventions and structure, use descriptive names, prefer LINQ + lambda, write concise and idomatic c# code. Avoid allocations on hot paths, like route matching, etc.  Use C# 12+ features when appropriate (e.g., record types, pattern matching, null-coalescing assignment). Use exceptions for exceptional cases, not for control flow.

When you make changes, run 'just test-shared' in the terminal to verify.

The users of this library are not very capable. Error messages must always provide a solution, always be accurate and descriptive, and ease of use is paramount. 

Don't generate technical debt; get full code coverage and build bottom-up. 